# Performance Profiling Report

## –ü—Ä–æ—î–∫—Ç
React Native (Expo) –º–æ–±—ñ–ª—å–Ω–∏–π –∑–∞—Å—Ç–æ—Å—É–Ω–æ–∫ –∑ –∫–∞–º–µ—Ä–æ—é, overlay-—Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª–æ–º —Ç–∞ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è–º —Ñ–æ—Ç–æ –≤ –º–µ–¥—ñ–∞—Ç–µ–∫—É.

---

## –ú–µ—Ç–æ–¥–æ–ª–æ–≥—ñ—è

- –ó–±—ñ—Ä –º–µ—Ç—Ä–∏–∫ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é `console.time`, `Performance Monitor`, –ª–æ–≥—ñ–≤ `logToFile`
- –í–∏–º—ñ—Ä—é–≤–∞–Ω–Ω—è RAM, FPS, —á–∞—Å—É –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –∫—Ä–∏—Ç–∏—á–Ω–∏—Ö —Ñ—É–Ω–∫—Ü—ñ–π
- –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –Ω–∞ iOS (Expo Go)
- –ê–Ω–∞–ª—ñ–∑ —Ç–∏–ø–æ–≤–∏—Ö —Å—Ü–µ–Ω–∞—Ä—ñ—ó–≤: overlay + —Ñ–æ—Ç–æ, –ø–µ—Ä–µ–≥–ª—è–¥ –≥–∞–ª–µ—Ä–µ—ó, –¥–∑–µ—Ä–∫–∞–ª–µ–Ω–Ω—è

---

## –ö–ª—é—á–æ–≤—ñ –º–µ—Ç—Ä–∏–∫–∏ –¥–æ –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó

| –û–ø–µ—Ä–∞—Ü—ñ—è                | –ß–∞—Å –≤–∏–∫–æ–Ω–∞–Ω–Ω—è / RAM        | –ö–æ–º–µ–Ω—Ç–∞—Ä |
|------------------------|-----------------------------|----------|
| `takePicture` (front)  | ~1600ms, RAM +60‚Äì90MB       | –¥–∑–µ—Ä–∫–∞–ª–µ–Ω–Ω—è —á–µ—Ä–µ–∑ `ImageManipulator`
| `loadGalleryImages`    | ~520ms                      | 21 —Ñ–æ—Ç–æ –∑ –≥–∞–ª–µ—Ä–µ—ó
| `overlay reference`    | RAM ~400MB                  | –≤–µ–ª–∏–∫—ñ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –±–µ–∑ —Ä–µ—Å–∞–π–∑—É

---

## –í–∏—è–≤–ª–µ–Ω—ñ "–≥–∞—Ä—è—á—ñ —Ç–æ—á–∫–∏"

1. **`takePicture`**
   - –í–∏—Å–æ–∫–∏–π —á–∞—Å –ø—Ä–∏ —Ñ—Ä–æ–Ω—Ç–∞–ª—å–Ω—ñ–π –∫–∞–º–µ—Ä—ñ —á–µ—Ä–µ–∑ `flip`
   - –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∑–∞–π–≤–∏—Ö —Ç–∏–º—á–∞—Å–æ–≤–∏—Ö —Ñ–∞–π–ª—ñ–≤

2. **`ImageManipulator.manipulateAsync`**
   - –ó–∞–π–º–∞—î –±–∞–≥–∞—Ç–æ —á–∞—Å—É –π –ø–∞–º º—è—Ç—ñ –ø—Ä–∏ –¥–∑–µ—Ä–∫–∞–ª–µ–Ω–Ω—ñ –≤–µ–ª–∏–∫–∏—Ö –∑–æ–±—Ä–∞–∂–µ–Ω—å

3. **Overlay reference image**
   - –í–µ–ª–∏–∫—ñ reference-–∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è ‚Üí –ø—ñ–¥–≤–∏—â–µ–Ω–µ GPU —Ç–∞ RAM –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è

---

## –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó

### üì∑ takePicture
- ‚úÖ –î–æ–¥–∞–Ω–æ `skipProcessing: true`
- ‚úÖ –ó–º–µ–Ω—à–µ–Ω–æ —Ä–æ–∑–º—ñ—Ä —Ñ–æ—Ç–æ –¥–æ 1280px + `compress: 0.7`
- ‚úÖ –í–∏–¥–∞–ª–µ–Ω–Ω—è —Ç–∏–º—á–∞—Å–æ–≤–æ–≥–æ URI –ø—ñ—Å–ª—è –æ–±—Ä–æ–±–∫–∏
- ‚úÖ –ê–ª—å–±–æ–º —Å—Ç–≤–æ—Ä—é—î—Ç—å—Å—è —Ç—ñ–ª—å–∫–∏ –æ–¥–∏–Ω —Ä–∞–∑ (`getAlbumAsync`)

### üñº overlay reference image
- ‚úÖ Reference image –æ–±—Ä–æ–±–ª—è—î—Ç—å—Å—è (resize + compress) –ø–µ—Ä–µ–¥ overlay
- ‚úÖ –û—á–∏—Å—Ç–∫–∞ `referencePhotoUri` —á–µ—Ä–µ–∑ `clearReferencePhoto`, —â–æ –≤–∏–¥–∞–ª—è—î –ª–∏—à–µ –ª–æ–∫–∞–ª—å–Ω—ñ —Ñ–∞–π–ª–∏

### üóÇÔ∏è loadGalleryImages
- ‚úÖ –û–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω–æ: `getAssetInfoAsync` –≤–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è **—Ç—ñ–ª—å–∫–∏ –¥–ª—è iOS `ph://`** URI
- ‚úÖ –£–Ω–∏–∫–Ω—É—Ç–æ –∑–∞–π–≤–∏—Ö –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∏—Ö –≤–∏–∫–ª–∏–∫—ñ–≤ (—à–≤–∏–¥—à–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –≥–∞–ª–µ—Ä–µ—ó)

---

## –û–Ω–æ–≤–ª–µ–Ω–∞ –º–µ—Ç—Ä–∏–∫–∞ –ø—ñ—Å–ª—è –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó

| –û–ø–µ—Ä–∞—Ü—ñ—è                | –ß–∞—Å –≤–∏–∫–æ–Ω–∞–Ω–Ω—è / RAM        | –ü–æ–∫—Ä–∞—â–µ–Ω–Ω—è |
|------------------------|-----------------------------|------------|
| `takePicture` (front)  | ~750‚Äì800ms, RAM —Å—Ç–∞–±.       | ~50%       |
| `loadGalleryImages`    | ~195ms                      | ~35%       |
| `overlay reference`    | RAM ~280-300MB              | ~50‚Äì60%    |

---

## –ù–æ–≤—ñ –ø—Ä–æ–±–ª–µ–º–∏ –ø—ñ—Å–ª—è –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó

- **switchCamera** ‚Äî FPS –≤—Å–µ —â–µ –ø–∞–¥–∞—î –ø—Ä–∏ —à–≤–∏–¥–∫–æ–º—É –ø–µ—Ä–µ–º–∏–∫–∞–Ω–Ω—ñ
  - üîß –ü–æ—Ç–µ–Ω—Ü—ñ–π–Ω–∞ –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è: –¥–æ–¥–∞—Ç–∏ `debounce`, —Ç–∏–º—á–∞—Å–æ–≤–æ –≤–∏–º–∏–∫–∞—Ç–∏ preview –ø—ñ–¥ —á–∞—Å flip

- **Flash toggle** ‚Äî —ñ–Ω–æ–¥—ñ –ø—Ä–∏ –≤–≤—ñ–º–∫–Ω–µ–Ω–Ω—ñ —Å–ø–∞–ª–∞—Ö—É FPS —Ç–∏–º—á–∞—Å–æ–≤–æ –ø–∞–¥–∞—î
  - üîß –ü–æ—Ç–µ–Ω—Ü—ñ–π–Ω–∞ –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è: –Ω–µ –æ–Ω–æ–≤–ª—é–≤–∞—Ç–∏ –≤–µ—Å—å `Camera` –∫–æ–º–ø–æ–Ω–µ–Ω—Ç, –∞ –∑–º—ñ–Ω—é–≤–∞—Ç–∏ `flashMode` –ª–æ–∫–∞–ª—å–Ω–æ —á–µ—Ä–µ–∑ –ø—Ä–æ–ø –∞–±–æ hook

---

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó

- üìâ –£–Ω–∏–∫–∞—Ç–∏ –¥–∑–µ—Ä–∫–∞–ª–µ–Ω–Ω—è —á–µ—Ä–µ–∑ `ImageManipulator`, —è–∫—â–æ –º–æ–∂–Ω–∞ –∑—Ä–æ–±–∏—Ç–∏ `scaleX: -1` —É UI
- üßπ –ó–∞–≤–∂–¥–∏ –æ—á–∏—â–∞—Ç–∏ —Ç–∏–º—á–∞—Å–æ–≤—ñ reference image —á–µ—Ä–µ–∑ `clearReferencePhoto`
- üñº –ó–∞–≤–∞–Ω—Ç–∞–∂—É–≤–∞—Ç–∏ –ª–∏—à–µ –æ–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω—ñ reference images
- üß™ –ü—Ä–æ–¥–æ–≤–∂–∏—Ç–∏ –ø—Ä–æ—Ñ—ñ–ª—é–≤–∞–Ω–Ω—è –ø—ñ—Å–ª—è 5+ —Ñ–æ—Ç–æ / overlay —Å—Ü–µ–Ω–∞—Ä—ñ—ó–≤